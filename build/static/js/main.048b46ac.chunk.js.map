{"version":3,"sources":["components/Persons.js","components/AddPerson.js","components/Filter.js","services/persons.js","components/Notification.js","App.js","index.js"],"names":["Person","person","handleDelete","name","number","onClick","id","Persons","persons","map","AddPerson","onSubmit","handleNameChange","newName","handleNumberChange","newNumber","onChange","value","type","Filter","filter","handleFilter","url","personService","getAll","response","axios","get","nonExist","then","data","concat","create","personObject","post","remove","delete","update","put","Notification","notification","console","log","message","errorStyle","color","fontStyle","fontSize","borderStyle","borderRadius","padding","marginBottom","style","App","useState","setPersons","setNewName","setNewNumber","setFilter","errorMessage","setErrorMessage","useEffect","PersonService","initialPerson","handleNotification","newNotification","setTimeout","personsToShow","length","toLowerCase","includes","event","target","header","preventDefault","find","element","window","confirm","updatePerson","returnedPerson","catch","error","newPerson","deletePerson","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.048b46ac.chunk.js","sourcesContent":["import React from 'react'\nconst Person = ({ person, handleDelete }) =>(\n  <p>{person.name} {person.number} <button onClick={()=>handleDelete(person.id)}>delete </button></p>  \n)\nconst Persons =({persons, handleDelete}) =>(\n      <div>\n        {persons.map(person => <Person key={person.name} person={person} handleDelete={handleDelete} />)}\n      </div>\n)\nexport default Persons\n","import React from 'react'\nconst AddPerson = ({onSubmit, handleNameChange, newName, handleNumberChange, newNumber}) =>(\n  <div>\n      <form onSubmit={onSubmit}>\n        <div>\n          name: <input onChange={handleNameChange} value={newName}/>\n        </div>\n        <div>\n          number: <input onChange={handleNumberChange} value={newNumber}/>\n        </div>\n        <div>\n          <button type=\"submit\">add</button>\n        </div>\n      </form>\n  </div>\n)\nexport default AddPerson\n","import React from 'react'\n\nconst Filter =({filter, handleFilter}) =>(\n    <div>\n      <div> filter shown with <input onChange={handleFilter} value={filter} /></div>\n    </div>\n)\nexport default Filter\n","import axios from 'axios'\n\nconst url='/api/persons'\n\nconst getAll = () => {  \n  const response = axios.get(url)\n  const nonExist = {\n    name:'Not on server',\n    number:'12345',\n    id:10000,\n  }\n  return response.then(response=>response.data.concat(nonExist))\n}\nconst create = (personObject) =>{\n  const response = axios\n  .post(url, personObject)\n  return response.then(response=> response.data )\n}\nconst update = (personObject, id) =>{\n  const response = axios\n  .put(`${url}/${id}`, personObject)\n  return response.then(response=>response.data)\n}\nconst remove = (id) => {\n\n  const response = axios\n  .delete(`${url}/${id}`)\n  return response.then(response=>response.data)\n\n}\nconst personService = { getAll, create, remove, update}\nexport default personService\n\n","import React from 'react'\nconst Notification = ({notification}) =>{\n  console.log(notification.message)\n  if (!notification.message){\n    return null\n  }\n  const errorStyle={\n    color:'green',\n    fontStyle:'italic',\n    fontSize:32,\n    borderStyle:'solid',\n    borderRadius:'5px',\n    padding:'10px',\n    marginBottom:'10px'\n  }\n  if (notification.type) errorStyle.color='red' \n  \n  return (\n    <div>\n      <p style={errorStyle}>{notification.message}</p>\n    </div>\n    )\n}\n\nexport default Notification\n","import React, { useState, useEffect } from 'react'\nimport Persons from './components/Persons'\nimport AddPerson from './components/AddPerson'\nimport Filter from './components/Filter'\nimport PersonService from './services/persons'\nimport Notification from './components/Notification'\nconst App = () => {\n  const [ persons, setPersons] = useState([])\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ filter, setFilter ] = useState('')\n  const [ errorMessage, setErrorMessage ] = useState({\n    message:null, type:false\n  }) \n  useEffect(()=>{\n    PersonService\n      .getAll()\n      .then(initialPerson=>setPersons(initialPerson))\n      }\n  ,[])\n\n  const handleNotification = (message, type=false) => {\n    const newNotification={\n      message:message,\n      type:type\n    }\n      setErrorMessage(newNotification)\n      setTimeout(() => {\n        setErrorMessage({\n          message:null, type:false\n        })\n      },5000)\n  }\n  const handleFilter = (event) => setFilter(event.target.value) \n  const handleNameChange = (event) => setNewName(event.target.value)\n  const handleNumberChange = (event) => setNewNumber(event.target.value)\n\n  const handleDelete = id => {\n    const deletePerson={\n     ...persons.find(person=>person.id===id)\n    }\n    if( window.confirm(`Delete ${deletePerson.name}`)){\n      PersonService\n      .remove(id)\n      .then(response=>{\n        setPersons(persons.filter(person=>person.id!==id))\n        handleNotification(`${deletePerson.name} deleted from server`)\n      })\n      .catch(error => {\n        handleNotification(`error:${deletePerson.name} has already removed from server`, true)\n        setPersons(persons.filter(person=>person.id!==deletePerson.id))\n      })\n    }\n  }\n\n  const addPerson = (event) => {\n    event.preventDefault()\n    const exists = persons.find(element =>element.name.toLowerCase()===newName.toLowerCase() )\n    if(!exists){\n      const newPerson={\n        name:newName,\n        number:newNumber,\n      }\n\n      PersonService\n      .create(newPerson)\n      .then(returnedPerson=>{\n        handleNotification(`Add ${returnedPerson.name} to phonebook`)\n        setPersons(persons.concat(returnedPerson))\n        setNewName('')\n        setNewNumber('')\n      })\n      .catch(error =>{\n        handleNotification(error.response.data.error,true) \n      })\n\n    }else{\n      if(window.confirm(`${newName}, is already added to phonebook, replace the old number with a new one?`)){\n        const updatePerson={\n          ...persons.find(person=>person.name===newName),\n          number:newNumber,\n        }\n        PersonService\n        .update(updatePerson, updatePerson.id)\n        .then(returnedPerson=>{\n          handleNotification(`Change ${returnedPerson.name} number`)\n          setPersons(persons.map(person=>person.id===updatePerson.id?returnedPerson:person))\n          setNewName('')\n          setNewNumber('')\n        })\n        .catch(error => {\n          console.log(error)\n          if(!error.response.data.error.includes('number')){\n            handleNotification(`error:${updatePerson.name} has already removed from server`, true)\n            setPersons(persons.filter(person=>person.id!==updatePerson.id))\n          } else {\n            handleNotification(error.response.data.error, true)\n          }\n      })\n      }\n    }\n  }\n\n  const personsToShow = filter.length ===0\n  ?persons: persons.filter(value => value.name.toLowerCase().includes(filter.toLowerCase()))\n  \n  return (\n    <div>\n    <h2>Phonebook </h2>\n    <Notification notification={errorMessage} />\n      <Filter filter={filter} handleFilter={handleFilter} header='Phonebook' />\n    <h3> Add a new</h3>\n      <AddPerson onSubmit={addPerson} handleNameChange={handleNameChange} newName={newName} handleNumberChange={handleNumberChange} newNumber={newNumber} />\n    <h3>Numbers</h3>\n      <Persons persons={personsToShow} handleDelete={handleDelete} />\n    </div>\n  )\n\n}\n\nexport default App\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n    <App />,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}